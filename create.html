<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Official Website â€” SN DESIGN STUDIO</title>
<link rel="stylesheet" href="assets/css/master.css">
</head>

<body>

<h1 id="engineTitle">AI ENGINE</h1>

<button id="createBtn">CREATE VIDEO</button>

<div id="detail"></div>
<div id="progress"></div>

<script>

const params=new URLSearchParams(location.search);

const template=params.get("template") || "unknown";

document.getElementById("engineTitle").innerText=
"ENGINE : "+template;

let jobID=null;

document.getElementById("createBtn").onclick=async()=>{

const detail=document.getElementById("detail");

detail.innerText="Sending job...";

const res=await fetch("/api/render",{

method:"POST",

headers:{ "Content-Type":"application/json" },

body:JSON.stringify({

templateID:template,
engine:"motion-ai",
duration:30

})

});

const data=await res.json();

jobID=data.jobID;

detail.innerText="JOB CREATED : "+jobID;

watch();

};

async function watch(){

const progress=document.getElementById("progress");

const loop=setInterval(async()=>{

const res=await fetch("/api/status?id="+jobID);

const d=await res.json();

progress.innerText=

"Template:"+d.templateID+
" | Status:"+d.status+
" | "+d.progress+"%";

if(d.status==="complete"){

clearInterval(loop);

}

},1500);

}

</script>
<button id="createBtn">CREATE VIDEO</button>

<div id="panel"></div>

<script>

const template=new URLSearchParams(location.search).get("template");

document.getElementById("createBtn").onclick=async()=>{

const res=await fetch("/api/render",{

method:"POST",

headers:{ "Content-Type":"application/json" },

body:JSON.stringify({

templateID:template,
engine:"motion-ai",
duration:30

})

});

const job=await res.json();

watch(job.jobID);

};

async function watch(id){

setInterval(async()=>{

const r=await fetch("/api/status?id="+id);
const d=await r.json();

document.getElementById("panel").innerHTML=`

Template:${d.templateID}<br>
Status:${d.status}<br>
Progress:${d.progress}%<br>
Credit:${d.creditUsed}<br>
ETA:${d.eta}

`;

},1500);

}
</script>
</body>
</html>
