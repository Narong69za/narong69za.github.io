<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ULTRA GOD CREATE â€” SN DESIGN STUDIO</title>

<style>

:root{
  --bg:#000;
  --card:#111;
  --border:#222;
  --accent:#ff0033;
  --accent-glow:rgba(255,0,51,.6);
  --text:#fff;
  --muted:#777;
}

body{
  margin:0;
  background:var(--bg);
  font-family:Montserrat,sans-serif;
  color:var(--text);
}

.container{
  max-width:900px;
  margin:auto;
  padding:40px 20px;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  padding:30px;
}

button{
  background:var(--accent);
  border:none;
  color:#fff;
  padding:16px;
  margin-top:20px;
  cursor:pointer;
}

.progress{
  height:6px;
  background:#111;
  margin-top:15px;
}

.bar{
  height:100%;
  width:0%;
  background:var(--accent);
}

.error{ color:#ff0033 }

</style>
</head>

<body>

<div class="container">

<h1>ULTRA GOD CREATE</h1>

<div class="card">

<div id="engineBlock">Loading preset...</div>

<div id="autoInputs"></div>

<button id="cta">CREATE VIDEO</button>

<div class="progress"><div class="bar" id="bar"></div></div>

<div id="status">STATUS: IDLE</div>

</div>

</div>

<script>

/* =========================
   ðŸ”¥ FIXED API BASE
========================= */

const API_BASE = "https://sn-design-api.onrender.com/api";

const PRESET_ID="motion-control";

const engineBlock=document.getElementById("engineBlock");
const autoInputs=document.getElementById("autoInputs");
const statusEl=document.getElementById("status");
const bar=document.getElementById("bar");

let currentPreset=null;


/* =========================
   LOAD PRESET
========================= */

async function loadPreset(){

 try{

   const res=await fetch(`${API_BASE}/templates/${PRESET_ID}`);

   const data=await res.json();

   if(!data || data.error){

      engineBlock.innerHTML=`<div class="error">Error loading preset</div>`;
      return;
   }

   currentPreset=data;

   engineBlock.innerHTML=`
      <strong>ENGINE:</strong> ${data.id}<br>
      Credit:${data.creditCost ?? "--"}<br>
      Limit:${data.limits?.maxDuration ?? "--"}s
   `;

   buildInputs(data.input);

 }catch(e){

   engineBlock.innerHTML=`<div class="error">Preset Load Failed</div>`;

 }

}


/* =========================
   AUTO INPUT UI
========================= */

function buildInputs(input){

 autoInputs.innerHTML="";

 if(!input) return;

 if(input.prompt)
   autoInputs.innerHTML+=`<textarea id="prompt" placeholder="Enter prompt"></textarea>`;

 if(input.image)
   autoInputs.innerHTML+=`<input type="file" id="imageInput">`;

 if(input.video)
   autoInputs.innerHTML+=`<input type="file" id="videoInput">`;

}


/* =========================
   CTA
========================= */

document.getElementById("cta").onclick=async ()=>{

 if(!currentPreset){

   statusEl.innerText="STATUS: PRESET ERROR";
   return;
 }

 statusEl.innerText="STATUS: PROCESSING";
 bar.style.width="30%";

 try{

   const res=await fetch(`${API_BASE}/render`,{

      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({

         preset:PRESET_ID,
         prompt:document.getElementById("prompt")?.value || null

      })

   });

   const result=await res.json();

   if(result.success){

      bar.style.width="100%";
      statusEl.innerText="STATUS: SUCCESS";

   }else{

      statusEl.innerText="STATUS: ERROR";
   }

 }catch(e){

   statusEl.innerText="STATUS: SERVER ERROR";
 }

};


/* ========================= */

loadPreset();

</script>

</body>
</html>
