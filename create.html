<!DOCTYPE html>
<html>
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<title>Create | SN Design Studio</title>

<link rel="stylesheet" href="/assets/css/create-premium.css">

<style>
body{
background:#000;
color:#fff;
font-family:sans-serif;
}

.container{
max-width:900px;
margin:auto;
padding:20px;
}

button{
cursor:pointer;
}

.active{
outline:2px solid #00ff88;
}

.engine-btn.red.active{
outline:2px solid red;
}

.engine-btn.blue.active{
outline:2px solid #00aaff;
}

.preview-box{
margin-top:20px;
}

.preview-box img,
.preview-box video{
max-width:100%;
border-radius:10px;
}

</style>

</head>

<body>

<div class="container">

<h1>CREATE ENGINE</h1>

<input id="promptInput" placeholder="Enter prompt" style="width:100%;padding:12px;margin-bottom:20px;">

<h3>1. Select Action</h3>

<button class="action-btn" data-type="video">Generate Video</button>
<button class="action-btn" data-type="image">Generate Image</button>
<button class="action-btn" data-type="upscale">Upscale</button>

<h3 style="margin-top:30px;">2. Select Engine</h3>

<div>

<button class="engine-btn red" data-platform="replicate" data-mode="dark-viral">
RED Dark Viral
</button>

<button class="engine-btn red" data-platform="replicate" data-mode="ai-lipsync">
RED AI LipSync
</button>

<button class="engine-btn red" data-platform="replicate" data-mode="dance-motion">
RED Dance Motion
</button>

<button class="engine-btn red" data-platform="replicate" data-mode="face-swap">
RED Face Swap
</button>

</div>

<div style="margin-top:10px;">

<button class="engine-btn blue" data-platform="runway" data-mode="dark-viral">
BLUE Dark Viral
</button>

<button class="engine-btn blue" data-platform="runway" data-mode="ai-lipsync">
BLUE AI LipSync
</button>

<button class="engine-btn blue" data-platform="runway" data-mode="dance-motion">
BLUE Dance Motion
</button>

<button class="engine-btn blue" data-platform="runway" data-mode="face-swap">
BLUE Face Swap
</button>

</div>

<h3 style="margin-top:30px;">3. Upload File</h3>

<input type="file" id="fileInput" accept="video/*,image/*">

<div class="preview-box" id="previewBox"></div>

<h3 style="margin-top:30px;">4. Generate</h3>

<button id="generateBtn" style="padding:15px 30px;">GENERATE</button>

<p id="statusText" style="margin-top:20px;">STATUS: IDLE</p>

</div>

<script>

const API="https://sn-design-api.onrender.com";

let selectedType=null;
let selectedPlatform=null;
let selectedMode=null;
let selectedFile=null;

/* ACTION */

document.querySelectorAll(".action-btn")
.forEach(btn=>{

btn.onclick=()=>{

document.querySelectorAll(".action-btn")
.forEach(b=>b.classList.remove("active"));

btn.classList.add("active");

selectedType=btn.dataset.type;

};

});

/* ENGINE */

document.querySelectorAll(".engine-btn")
.forEach(btn=>{

btn.onclick=()=>{

document.querySelectorAll(".engine-btn")
.forEach(b=>b.classList.remove("active"));

btn.classList.add("active");

selectedPlatform=btn.dataset.platform;
selectedMode=btn.dataset.mode;

};

});

/* FILE PREVIEW */

document.getElementById("fileInput")
.addEventListener("change",(e)=>{

const file=e.target.files[0];

if(!file) return;

selectedFile=file;

const url=URL.createObjectURL(file);

const box=document.getElementById("previewBox");

if(file.type.startsWith("video")){

box.innerHTML=`<video src="${url}" controls autoplay loop></video>`;

}else{

box.innerHTML=`<img src="${url}">`;

}

});

/* GENERATE */

document.getElementById("generateBtn")
.onclick=async()=>{

if(!selectedPlatform || !selectedMode){

alert("Select Engine First");
return;

}

document.getElementById("statusText").innerText="STATUS: PROCESSING";

const formData=new FormData();

formData.append("platform",selectedPlatform);
formData.append("alias",selectedMode);
formData.append("type",selectedType || "");
formData.append("prompt",document.getElementById("promptInput").value);

if(selectedFile){

formData.append("file",selectedFile);

}

try{

const res=await fetch(API+"/api/render",{

method:"POST",
body:formData

});

const data=await res.json();

console.log(data);

document.getElementById("statusText")
.innerText="STATUS: COMPLETE";

}catch(err){

console.log(err);

document.getElementById("statusText")
.innerText="STATUS: ERROR";

}

};

</script>

</body>
</html>
