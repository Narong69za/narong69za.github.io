<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>Official Website — SN DESIGN STUDIO</title>

<link rel="stylesheet" href="assets/css/master.css">

</head>

<body class="create-page">

<div id="nav"></div>

<section class="hero-master">

<h1 id="engineTitle">AI ENGINE</h1>
<img id="heroImage" style="max-width:600px">

</section>

<section class="create-area">

<input type="file" id="videoInput" accept="video/*">
<video id="videoPreview" controls></video>

<input type="file" id="imageInput" accept="image/*">
<img id="imagePreview">

<button id="createBtn">CREATE VIDEO</button>

</section>

<footer>
© SN Design Studio, 2026 · All rights reserved.
</footer>

<script src="assets/js/nav.js"></script>

<script>

/* ======================================
SN DESIGN CREATE ENGINE (FINAL CLEAN)
====================================== */

document.addEventListener("DOMContentLoaded",()=>{

console.log("CREATE PAGE READY");

/* template load */

const params = new URLSearchParams(window.location.search);
const template = params.get("template");

const hero = document.getElementById("heroImage");
const title = document.getElementById("engineTitle");

if(template){

title.innerText = template.replaceAll("-"," ").toUpperCase();
hero.src = `assets/images/template-${template}.jpg`;

}

/* preview */

let videoFile=null;
let imageFile=null;

document.getElementById("videoInput").addEventListener("change",(e)=>{

videoFile=e.target.files[0];

if(videoFile){

document.getElementById("videoPreview").src=
URL.createObjectURL(videoFile);

}

});

document.getElementById("imageInput").addEventListener("change",(e)=>{

imageFile=e.target.files[0];

if(imageFile){

document.getElementById("imagePreview").src=
URL.createObjectURL(imageFile);

}

});

/* CREATE BUTTON */

/* =====================================
ULTRA FINAL CREATE ENGINE
SAFE NULL CHECK + REAL API CALL
===================================== */

document.addEventListener("DOMContentLoaded", () => {

  const btn = document.getElementById("createBtn");

  if(!btn){
    console.warn("CREATE BUTTON NOT FOUND");
    return;
  }

  btn.addEventListener("click", async () => {

    console.log("CREATE CLICKED");

    try{

      const res = await fetch("/api/render",{
        method:"POST",
        headers:{
          "Content-Type":"application/json"
        },
        body:JSON.stringify({
          mode:"direct"
        })
      });

      if(!res.ok){
        throw new Error("Render failed");
      }

      const data = await res.json();

      console.log("RENDER SUCCESS",data);

      alert("Render Started");

    }catch(err){

      console.error(err);
      alert("Render error");

    }

  });

});

</script>

</body>
</html>
