<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ULTRA GOD CREATE — SN DESIGN STUDIO</title>

<style>

/* =========================
   SN DESIGN LOCK STYLE
========================= */

:root{
  --bg:#000;
  --card:#111;
  --border:#222;
  --accent:#ff0033;
  --accent-glow:rgba(255,0,51,.6);
  --text:#fff;
  --muted:#777;
}

body{
  margin:0;
  background:var(--bg);
  font-family:Montserrat, sans-serif;
  color:var(--text);
}

.container{
  max-width:900px;
  margin:auto;
  padding:40px 20px;
}

h1{
  font-size:40px;
  letter-spacing:2px;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  padding:30px;
  margin-top:30px;
}

.status{
  margin-top:15px;
  font-size:18px;
  color:var(--muted);
}

input,textarea{
  width:100%;
  padding:14px;
  background:#0d0d0d;
  border:1px solid #222;
  color:#fff;
  margin-top:15px;
}

button{
  background:var(--accent);
  color:#fff;
  border:none;
  padding:16px;
  margin-top:20px;
  font-weight:bold;
  cursor:pointer;
  transition:.3s;
}

button:hover{
  box-shadow:0 0 20px var(--accent-glow);
}

.progress{
  height:6px;
  background:#111;
  margin-top:15px;
  overflow:hidden;
}

.bar{
  height:100%;
  width:0%;
  background:var(--accent);
  transition:.3s;
}

.error{
  color:var(--accent);
}

</style>
</head>

<body>

<div class="container">

<h1>ULTRA GOD CREATE</h1>

<div class="card">

<div id="engineBlock">Loading preset...</div>

<div id="autoInputs"></div>

<button id="cta">CREATE VIDEO</button>

<div class="progress"><div class="bar" id="bar"></div></div>

<div class="status" id="status">STATUS: IDLE</div>

</div>

</div>

<script>

const API_BASE = "https://api.sn-designstudio.dev/api";
const PRESET_ID = "motion-control"; // เปลี่ยนได้ตามหน้า

const engineBlock = document.getElementById("engineBlock");
const autoInputs = document.getElementById("autoInputs");
const statusEl = document.getElementById("status");
const bar = document.getElementById("bar");

let currentPreset = null;

/* =========================
   LOAD PRESET AUTO
========================= */

async function loadPreset(){

  try{

    const res = await fetch(`${API_BASE}/templates/${PRESET_ID}`);
    const data = await res.json();

    if(data.error){
      engineBlock.innerHTML = `<div class="error">Error loading preset</div>`;
      return;
    }

    currentPreset = data;

    engineBlock.innerHTML = `
      <strong>ENGINE:</strong> ${data.engine}<br/>
      Credit: ${data.creditCost || "--"}<br/>
      Limit: ${data.limits?.maxDuration || "--"}s
    `;

    buildInputs(data.input);

  }catch(e){
    engineBlock.innerHTML = `<div class="error">Preset Load Failed</div>`;
  }

}

/* =========================
   AUTO BUILD UI
========================= */

function buildInputs(inputConfig){

  autoInputs.innerHTML = "";

  if(!inputConfig) return;

  if(inputConfig.prompt){
    autoInputs.innerHTML += `<textarea id="prompt" placeholder="Enter prompt..."></textarea>`;
  }

  if(inputConfig.image){
    autoInputs.innerHTML += `<input type="file" id="imageInput" />`;
  }

  if(inputConfig.video){
    autoInputs.innerHTML += `<input type="file" id="videoInput" />`;
  }

}

/* =========================
   RENDER
========================= */

document.getElementById("cta").addEventListener("click", async ()=>{

  if(!currentPreset){
    statusEl.innerText = "STATUS: PRESET ERROR";
    return;
  }

  statusEl.innerText = "STATUS: PROCESSING";
  bar.style.width = "20%";

  const payload = {
    preset: PRESET_ID,
    prompt: document.getElementById("prompt")?.value || null
  };

  try{

    const res = await fetch(`${API_BASE}/render`,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify(payload)
    });

    const result = await res.json();

    if(result.success){
      bar.style.width = "100%";
      statusEl.innerText = "STATUS: SUCCESS";
    }else{
      statusEl.innerText = "STATUS: ERROR";
    }

  }catch(e){
    statusEl.innerText = "STATUS: SERVER ERROR";
  }

});

/* ========================= */

loadPreset();

</script>

</body>
</html>
