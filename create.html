<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>CREATE — SN DESIGN STUDIO</title>

<!-- ✅ ใช้ CSS แยก -->
<link rel="stylesheet" href="/assets/css/app-create-premium.css">

</head>

<body>

<div class="create-wrapper">

<h1 class="create-title">
CREATE PROJECT
</h1>

<!-- ================= ENGINE SELECT ================= -->

<div id="engineGrid" class="engine-grid"></div>

<!-- ================= FORM ================= -->

<div class="create-form">

<textarea id="prompt" placeholder="Enter prompt..."></textarea>

<input type="file" id="fileInput">

<button id="runBtn">GENERATE</button>

</div>

<div id="result" class="result-box"></div>

</div>


<script>

const API = "https://sn-design-api.onrender.com";

let CURRENT_ENGINE = null;


/* ================= LOAD TEMPLATE ================= */

async function loadTemplates(){

   const res = await fetch(API + "/api/templates");
   const templates = await res.json();

   const grid = document.getElementById("engineGrid");
   grid.innerHTML="";

   templates.forEach(t=>{

      const el=document.createElement("div");
      el.className="engine-card";

      el.innerHTML=`
         <div class="engine-name">${t.id}</div>
         <div class="engine-provider">${t.provider}</div>
      `;

      el.onclick=()=>{
         CURRENT_ENGINE=t.id;

         document.querySelectorAll(".engine-card")
         .forEach(c=>c.classList.remove("active"));

         el.classList.add("active");
      };

      grid.appendChild(el);

   });

}


/* ================= RUN ================= */

document.getElementById("runBtn").onclick=async()=>{

   if(!CURRENT_ENGINE){
      alert("Select engine");
      return;
   }

   const prompt=document.getElementById("prompt").value;

   const body={
      preset:CURRENT_ENGINE,
      prompt
   };

   const res=await fetch(API+"/api/render",{
      method:"POST",
      headers:{ "Content-Type":"application/json"},
      body:JSON.stringify(body)
   });

   const data=await res.json();

   document.getElementById("result").innerHTML=
      "<pre>"+JSON.stringify(data,null,2)+"</pre>";

};

loadTemplates();

</script>

</body>
</html>
