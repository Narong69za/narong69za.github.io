<!DOCTYPE html>
<html lang="en">
<head>

<title>Official Website — SN DESIGN STUDIO</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link rel="stylesheet" href="assets/css/master.css">

</head>

<body class="create-page">

<div id="nav"></div>

<section class="hero-master">

<h1 id="engineTitle">AI ENGINE</h1>
<img id="heroImage" style="max-width:600px">

</section>

<section class="create-area">

<input type="file" id="videoInput" accept="video/*">
<video id="videoPreview" controls></video>

<input type="file" id="imageInput" accept="image/*">
<img id="imagePreview">

<button id="createBtn">CREATE VIDEO</button>

</section>

<footer>
© SN Design Studio, 2026 · All rights reserved.
</footer>

<script src="assets/js/nav.js"></script>

<script>

/* ======================
API BASE AUTO
====================== */

const API_BASE = window.location.origin;


/* ======================
TEMPLATE LOAD
====================== */

const params=new URLSearchParams(window.location.search);
const template=params.get("template");

const hero=document.getElementById("heroImage");
const title=document.getElementById("engineTitle");

if(template && hero && title){

title.innerText=template.replaceAll("-"," ").toUpperCase();
hero.src=`assets/images/template-${template}.jpg`;

}


/* ======================
AUTH + CREDIT LOCK SYSTEM
====================== */

let USER_DEV_MODE=false;
let USER_TOKEN=localStorage.getItem("sn_token");

async function authCheck(){

try{

const res=await fetch(`${API_BASE}/api/auth-check`,{

method:"POST",
headers:{ "Content-Type":"application/json"},
body:JSON.stringify({token:USER_TOKEN})

});

const data=await res.json();

if(data.user && data.user.dev===true){

USER_DEV_MODE=true;

}

if(data.limit){

alert("FREE LIMIT REACHED (3/day)");
return false;

}

return true;

}catch(e){

console.log("AUTH ERROR:",e);
return false;

}

}


/* ======================
PREVIEW
====================== */

let videoFile=null;
let imageFile=null;

videoInput.onchange=e=>{

videoFile=e.target.files[0];

if(videoFile){
videoPreview.src=URL.createObjectURL(videoFile);
}

};

imageInput.onchange=e=>{

imageFile=e.target.files[0];

if(imageFile){
imagePreview.src=URL.createObjectURL(imageFile);
}

};


/* ======================
AUTO RESULT CHECK
====================== */

async function autoCheck(jobId){

const timer=setInterval(async()=>{

const res=await fetch(`${API_BASE}/api/result/${jobId}`);
const data=await res.json();

if(data.ready){

clearInterval(timer);

alert("Render completed");

}

},5000);

}


/* ======================
REAL RENDER ENGINE
====================== */

createBtn.onclick=async()=>{

const allow=await authCheck();

if(!allow){

alert("AUTH REQUIRED");
return;

}

const inputData={

video: videoFile ? videoFile.name : null,
image: imageFile ? imageFile.name : null

};

const res=await fetch(`${API_BASE}/api/render`,{

method:"POST",
headers:{ "Content-Type":"application/json"},
body:JSON.stringify({

template:template,
input:inputData

})

});

const data=await res.json();

if(data.jobId){

autoCheck(data.jobId);

}

alert("Render job sent");

};

</script>

</body>
</html>
